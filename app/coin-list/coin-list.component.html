<div class="container">
  <div class="filter-container mat-elevation-z3">
    <mat-form-field class="filter-field" appearance="outline">
      <mat-label>Year</mat-label>
      <mat-select [(value)]="selectedYear" (selectionChange)="filterCoins()">
        <mat-option *ngFor="let year of years" [value]="year">
          {{ year }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  
    <mat-form-field class="filter-field" appearance="outline">
      <mat-label>Country</mat-label>
      <mat-select [(value)]="selectedCountry" (selectionChange)="filterCoins()">
        <mat-option *ngFor="let country of countries" [value]="country">
          {{ country }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-stroked-button color="primary" class="clear-button" (click)="clearFilters()">Clear Filters</button>
  </div>
  <div *ngFor="let country of groupedCoins | keyvalue">
    <h2>{{ country.key }}</h2>
    <div class="row">
      <div class="col-md-3 minwidth" *ngFor="let coin of country.value">
        <div class="card mb-4 box-shadow">
          <img class="card-img-top" [src]="coin.img_url" alt="{{ coin.country }} Coin">
          <div class="card-body">
            <h5 class="card-title">{{ coin.year }}</h5>
            <div class="d-flex justify-content-between align-items-center">
              <a [routerLink]="['/coins', coin._id]" class="btn btn-sm btn-outline-secondary">View</a>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" (change)="checkboxChange(coin._id, coin.collected, $event)" [checked]="coin.collected">
                <label class="form-check-label">Collected</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
